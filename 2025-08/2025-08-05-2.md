---
tags:
  - 日記
  - PermanentNote
aliases: 
UID: 2025-08-05T18-27-54
---
[日記](日記.md)
[02_モデルスペック](02_モデルスペック.md)
# 概要
modelに記載した内容を確認するための自動テストとしてmodel specというものがある
今回はコードを書きながらmodel specとテストを書く際に利用される記法について学ぶ

## インプットフェーズ
### model spec
RSpecにおけるmodel specは、アプリケーションのモデル（データベースのテーブルやオブジェクトのクラスなど）振る舞いをテストするため利用
具体的なテストケース
→モデルのインスタンスを生成し、属性を設定して保存したり、バリデーションエラーが発生する条件をテストする
期待される結果と実際の結果を比較して、テストが成功したか判断する

## テストのグループ化
RSpecでは、テストコードを組織化して書くためにdescribe、context、itというブロックを使用する

- describe
  describeブロックは、テスト対象のクラスやメソッドなどのグループを定義する
  テストコード内で複数のdescribeブロックを生成することができ、階層構造を持たせることもできる
```
describe "クラス名やメソッドの処理内容などを記載する" do
  ...
end
```
describeブロック内には、そのクラスやメソッドに関連する複数のテストケースを含めることができる
- context
  contextブロックは、複数の状況や条件に基づいてテストをグループ化するために使用される
  describeブロックの内部に記述されることが一般的
```
describe "クラス名やメソッドの処理内容などを記載する" do
  context "状況や条件などを記載する" do
    ...
  end
end
```
contextブロックを使うことで、テストの可読性が向上し、どのような状況や条件でテストを行っているのかが明確になる

- it
  itブロックは、特定のテストケースを定義し、1つのitブロックは1つのテストケースを表す
```
describe "クラス名やメソッドの処理内容などを記載する" do
  context "状況や条件などを記載する" do
    it "テストケースの説明" do
      ...
    end
  end
end
```
## 検証メソッド
値を検証するためにexpectメソッドを利用する
```
expect(テスト対象の値).to マッチャー(期待する値)
```
**expect().to**の構文を利用する

## マッチャ―
RSpecのマッチャ―は、テストコード内で期待される値と実際の値を比較し、テスト結果を判定するために使用される
- eq
  eqマッチャ―は、2つの値が等しいかどうか比較する
  具体的な使い方は以下の通り
```
expect(テスト対象の値).to eq(期待する値)
```

- be
  beマッチャ―は、真偽値のtrue/falseやオブジェクトが特定の条件を満たすかどうかを判定する